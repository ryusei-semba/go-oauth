# go-oauth
oauth系の検証する
https://github.com/golang/oauth2

## ディレクトリ構成

```
.
├── .air.toml
├── .env
├── .gitignore
├── README.md
├── go.mod
├── go.sum
├── interfaces
│   ├── handler.go
│   └── route.go
├── main.go
└── usecase
    └── token_usecase.go
```

### 各ディレクトリ・ファイルの説明

#### メインディレクトリ
- `main.go`: アプリケーションのエントリーポイント。サーバーの起動と初期設定を行います。
- `.air.toml`: ホットリロード用の設定ファイル。開発時のコード変更を自動で反映します。
- `.env`: 環境変数の設定ファイル。APIキーなどの機密情報を管理します。
- `go.mod`, `go.sum`: Goの依存関係管理ファイル。

#### interfaces/
HTTPリクエストの受け付けとルーティングを担当するレイヤー
- `handler.go`: HTTPリクエストのハンドリング処理を実装
- `route.go`: エンドポイントのルーティング設定を管理

#### usecase/
アプリケーションのビジネスロジックを実装するレイヤー
- `token_usecase.go`: OAuth認証に関するトークンの処理を実装

## クリーンアーキテクチャ改善ポイント

### 追加が推奨されるディレクトリ/レイヤー
1. `domain/`: ビジネスエンティティとドメインルールを定義
   - エンティティの構造体定義
   - ドメインのインターフェース定義

2. `repository/`: データの永続化層を実装
   - データベースアクセス
   - 外部APIとの通信処理

3. `infrastructure/`: 技術的な実装の詳細
   - データベース接続
   - 外部サービスクライアント
   - ミドルウェア

### リファクタリングポイント
1. 依存関係の方向
   - 外側のレイヤー（interfaces）から内側のレイヤー（domain）への依存のみとする
   - インターフェースを活用した依存性の逆転

2. ユースケースの分離
   - 現在の`token_usecase.go`をより細かい責務に分割
   - インターフェースとその実装を明確に分離

3. エラーハンドリング
   - ドメイン固有のエラー型の定義
   - レイヤー間のエラー変換処理の実装


